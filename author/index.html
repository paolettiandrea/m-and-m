<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />
    <!-- Load polyfills to support older browsers -->
    <script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>
    <!-- Load Vue related stuff-->
    <script src="//cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"></script>


    <link type="text/css" rel="stylesheet" href="css/MissionHeadForm.css"/>

    <script src="//cdn.jsdelivr.net/npm/@antv/g6@3.5.0/dist/g6.min.js" ></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/node-uuid/1.4.8/uuid.js"></script>

    <script src="../player/components/ActivityDisplayer.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.js"></script>
    <script src="//unpkg.com/vuex@3.4.0/dist/vuex.js"></script>

    <script src="/common/js/VueUtils.js"></script>

    <title>Title</title>
</head>
<body>
    <div id="app">
        <author-main></author-main>
    </div>

    <script>
        Vue.use(Vuex);


        const store = new Vuex.Store({
            state: {
                selectedId: 0,

                contentTypes: null,
                inputTypes: null
            },
            mutations: {
                select (state, id) {
                    state.selectedId = id;
                },

                // Initializes all the store data that is destined to be constant throughout execution
                initializeConstData(state) {
                    axios.get("./components/editor/activity-editor/content-chunk-editors/contentChunkTypes.json").then( res => {
                        state.contentTypes = res.data.contentChunkTypes;
                    })
                    axios.get("./components/editor/activity-editor/input-editors/inputTypes.json").then( res => {
                        state.inputTypes = res.data.inputTypes;
                    })
                }
            }
            })

        store.commit('initializeConstData');





        const App = new Vue({
            el: '#app',
            store,
            components: {
                'author-main': () => import("./components/AuthorMain.js")
            },
            mounted() {
                Vue.use((Vue) => {
                    Vue.prototype.$bubble = function $bubble(eventName, ...args) {
                        // Emit the event on all parent components
                        let component = this;
                        do {
                            component.$emit(eventName, ...args);
                            component = component.$parent;
                        } while (component);
                    };
                });


            }
        })
    </script>

</body>
</html>